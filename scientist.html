<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Brickonaut ¬∑ Scientist Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
  :root{
    --bg:#0b2240; --ink:#eaf0f7; --muted:#b8c7dc; --plate:#0f2a50; --stroke:rgba(255,255,255,.10);
    --lego-red:#e11d25; --lego-yellow:#f8c414; --lego-blue:#1e90ff; --lego-green:#31b553;
    --max:1120px; --radius:16px;
  }
  *{box-sizing:border-box}
  html,body{height:100%; margin:0}
  body{
    line-height:1.65; color:var(--ink);
    font-family:Inter, system-ui, -apple-system, Segoe UI, Arial, Helvetica, sans-serif;
    background:
      radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,.35) 25%, transparent 26%) 0 0/110px 110px,
      radial-gradient(1px 1px at 75% 65%, rgba(255,255,255,.25) 25%, transparent 26%) 0 0/90px 90px,
      linear-gradient(180deg, #0b1d39 0%, var(--bg) 60%);
    -webkit-font-smoothing:antialiased;
  }
  .wrap{max-width:var(--max); margin:0 auto; padding:0 28px}
  .header{position:sticky; top:0; z-index:30; background:rgba(10,22,44,.76); backdrop-filter:blur(8px); border-bottom:1px solid var(--stroke)}
  .row{display:flex; align-items:center; justify-content:space-between; gap:22px; flex-wrap:wrap; padding:18px 0}
  .brand{display:flex; align-items:center; gap:14px}
  .brand img{width:60px; height:60px; object-fit:contain; border-radius:50%; border:2px solid var(--stroke)}
  .brand h1{margin:0; font-family:Bungee,Inter; letter-spacing:.6px; font-size:24px; white-space:nowrap}
  .brand small{display:block; color:var(--muted); letter-spacing:.6px}
  .stud-strip{height:20px; border-top:1px solid var(--stroke); border-bottom:1px solid var(--stroke);
    background:
      radial-gradient(circle at 14px 10px, rgba(255,255,255,.2) 32%, rgba(0,0,0,.3) 33%, transparent 34%) 0 0/52px 20px,
      radial-gradient(circle at 38px 10px, rgba(255,255,255,.2) 32%, rgba(0,0,0,.3) 33%, transparent 34%) 0 0/52px 20px,
      linear-gradient(90deg, var(--lego-red) 0 25%, var(--lego-yellow) 25% 50%, var(--lego-blue) 50% 75%, var(--lego-green) 75% 100%);
    opacity:.55;
  }
  .nav{display:flex; gap:12px; flex-wrap:wrap}
  .cta{display:inline-flex; align-items:center; gap:8px; background:var(--lego-yellow); color:#1b1200; font-weight:800;
       border:none; border-radius:12px; padding:10px 16px; text-decoration:none; font-size:14px; cursor:pointer}
  .cta:hover{filter:brightness(1.06)}
  
  .hero{padding:40px 0 30px; text-align:center}
  .h-head{margin:0 0 12px; font-size:36px; letter-spacing:.6px}
  .h-sub{margin:0; color:var(--muted); max-width:800px; margin:0 auto}

  .search-section{padding:30px 0}
  .search-box{position:relative; max-width:900px; margin:0 auto}
  .search-input{width:100%; padding:18px 60px 18px 24px; font-size:16px; border-radius:16px;
    border:2px solid var(--stroke); background:var(--plate); color:var(--ink);
    font-family:inherit}
  .search-input::placeholder{color:var(--muted)}
  .search-input:focus{outline:none; border-color:var(--lego-blue)}
  .search-btn{position:absolute; right:8px; top:50%; transform:translateY(-50%);
    background:var(--lego-blue); color:white; border:none; border-radius:10px;
    padding:10px 20px; font-weight:700; cursor:pointer}
  .search-btn:hover{filter:brightness(1.1)}

  .filters{display:flex; gap:12px; margin-top:20px; flex-wrap:wrap; justify-content:center}
  .filter-btn{padding:8px 16px; background:var(--plate); border:1px solid var(--stroke);
    border-radius:8px; color:var(--muted); cursor:pointer; font-size:14px}
  .filter-btn.active{background:var(--lego-blue); color:white; border-color:var(--lego-blue)}
  .filter-btn:hover{border-color:var(--lego-blue)}

  .results-section{padding:30px 0}
  .results-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:20px}
  .results-count{color:var(--muted); font-size:14px}
  .sort-select{padding:8px 12px; background:var(--plate); border:1px solid var(--stroke);
    border-radius:8px; color:var(--ink); font-family:inherit}

  .paper-grid{display:grid; gap:24px}
  .paper-card{background:var(--plate); border:1px solid var(--stroke); border-radius:var(--radius);
    padding:24px; transition:all 0.2s}
  .paper-card:hover{border-color:var(--lego-blue); transform:translateY(-2px)}
  .paper-header{display:flex; justify-content:space-between; align-items:start; margin-bottom:12px}
  .paper-title{font-size:20px; font-weight:700; margin:0 0 8px; line-height:1.3}
  .paper-id{font-size:12px; color:var(--muted); font-family:monospace}
  .paper-meta{display:flex; gap:12px; flex-wrap:wrap; margin-bottom:12px}
  .meta-tag{padding:4px 10px; background:rgba(30,144,255,0.15); color:var(--lego-blue);
    border-radius:6px; font-size:12px; font-weight:600}
  .paper-abstract{color:var(--muted); line-height:1.6; margin-bottom:16px}
  .paper-links{display:flex; gap:10px; flex-wrap:wrap}
  .link-btn{padding:6px 14px; background:rgba(255,255,255,0.05); border:1px solid var(--stroke);
    border-radius:8px; color:var(--ink); text-decoration:none; font-size:13px; font-weight:600}
  .link-btn:hover{border-color:var(--lego-blue); background:rgba(30,144,255,0.1)}

  .loading{text-align:center; padding:60px; color:var(--muted)}
  .empty-state{text-align:center; padding:80px 20px; color:var(--muted)}
  .empty-state h3{font-size:24px; margin-bottom:12px}

  .footer{border-top:1px solid var(--stroke); color:var(--muted); text-align:center; padding:28px 0 40px; margin-top:60px}

  @media (max-width:768px){
    .h-head{font-size:28px}
    .filters{justify-content:flex-start}
    .results-header{flex-direction:column; align-items:flex-start; gap:12px}
  }
</style>
</head>
<body>
  <header class="header">
    <div class="wrap">
      <div class="row">
        <div class="brand">
          <img src="assets/lego-logo.png" alt="Brickonaut badge" />
          <div>
            <h1>Brickonaut</h1>
            <small>UIC Chicago ¬∑ NASA Space Apps ¬∑ Space Bioscience Explorer</small>
          </div>
        </div>
        <nav class="nav">
          <a class="cta" style="background:var(--lego-blue); color:white" href="scientist.html">Scientist</a>
          <a class="cta" style="background:var(--lego-green); color:white" href="manager.html">Manager</a>
          <a class="cta" style="background:var(--lego-red); color:white" href="architect.html">Architect</a>
          <a class="cta" style="background:var(--lego-yellow)" href="index.html">Home</a>
        </nav>
      </div>
    </div>
    <div class="stud-strip"></div>
  </header>
  

  <main class="wrap">
    <section class="hero">
      <h2 class="h-head">Research Publication Explorer</h2>
      <p class="h-sub">Semantic search across 608+ NASA bioscience publications. Discover experiments, identify research gaps, and explore related studies.</p>
    </section>

    <section class="search-section">
      <div class="search-box">
        <input type="text" class="search-input" id="searchInput" 
               placeholder="Search by topic, organism, condition, or experiment type..." 
               onkeypress="handleSearchKeypress(event)">
        <button class="search-btn" onclick="performSearch()">Search</button>
      </div>

      <div class="filters">
        <button class="filter-btn active" data-filter="all" onclick="filterBy('all')">All Studies</button>
        <button class="filter-btn" data-filter="mice" onclick="filterBy('mice')">Mice</button>
        <button class="filter-btn" data-filter="iss" onclick="filterBy('iss')">ISS Platform</button>
        <button class="filter-btn" data-filter="muscle" onclick="filterBy('muscle')">Muscle</button>
        <button class="filter-btn" data-filter="bone" onclick="filterBy('bone')">Bone</button>
        <button class="filter-btn" data-filter="cardiovascular" onclick="filterBy('cardiovascular')">Cardiovascular</button>
      </div>
    </section>

    <section class="results-section">
      <div class="results-header">
        <div class="results-count" id="resultsCount">Showing 5 publications</div>
        <select class="sort-select" id="sortSelect" onchange="sortResults()">
          <option value="relevance">Sort by Relevance</option>
          <option value="year">Sort by Year</option>
          <option value="citations">Sort by Citations</option>
        </select>
      </div>

      <div class="paper-grid" id="resultsContainer">
        <!-- Papers will be inserted here -->
      </div>

      <div class="loading" id="loadingState" style="display:none">
        <p>üîç Searching publications...</p>
      </div>

      <div class="empty-state" id="emptyState" style="display:none">
        <h3>No results found</h3>
        <p>Try different keywords or filters</p>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="wrap"><small>¬© 2025 Brickonaut ¬∑ Le'Go Team ¬∑ UIC Chicago ¬∑ NASA Space Apps</small></div>
  </footer>

  <script>
    let samplePapers = [];
    let currentPapers = [];
    let activeFilter = 'all';

    // Load data from JSON file
    fetch('papers_data.json')
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to load papers_data.json');
        }
        return response.json();
      })
      .then(data => {
        console.log('Loaded papers:', data.length);
        samplePapers = data;
        currentPapers = [...samplePapers];
        displayResults(currentPapers);
      })
      .catch(error => {
        console.error('Error loading papers:', error);
        // Show error to user
        document.getElementById('emptyState').style.display = 'block';
        document.getElementById('emptyState').innerHTML = `
          <h3>Error loading data</h3>
          <p>${error.message}</p>
          <p>Make sure papers_data.json is in the same folder as scientist.html</p>
        `;
      });

    // let activeFilter = 'all';

    function handleSearchKeypress(event) {
      if (event.key === 'Enter') {
        performSearch();
      }
    }

    function performSearch() {
      const query = document.getElementById('searchInput').value.toLowerCase();
      
      if (!query) {
        currentPapers = [...samplePapers];
      } else {
        currentPapers = samplePapers.filter(paper => 
          paper.title.toLowerCase().includes(query) ||
          paper.abstract.toLowerCase().includes(query) ||
          paper.keywords.some(k => k.toLowerCase().includes(query))
        );
      }

      displayResults(currentPapers);
    }

    function filterBy(filter) {
      activeFilter = filter;
      
      // Update button states
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.filter === filter) {
          btn.classList.add('active');
        }
      });

      const query = document.getElementById('searchInput').value.toLowerCase();
      
      if (filter === 'all') {
        currentPapers = [...samplePapers];
      } else {
        currentPapers = samplePapers.filter(paper => 
          paper.keywords.includes(filter)
        );
      }

      // Apply search filter if exists
      if (query) {
        currentPapers = currentPapers.filter(paper => 
          paper.title.toLowerCase().includes(query) ||
          paper.abstract.toLowerCase().includes(query) ||
          paper.keywords.some(k => k.toLowerCase().includes(query))
        );
      }

      displayResults(currentPapers);
    }

    function sortResults() {
      const sortBy = document.getElementById('sortSelect').value;
      
      if (sortBy === 'year') {
        currentPapers.sort((a, b) => b.year - a.year);
      } else if (sortBy === 'citations') {
        currentPapers.sort((a, b) => b.citations - a.citations);
      }
      
      displayResults(currentPapers);
    }

    function displayResults(papers) {
      const container = document.getElementById('resultsContainer');
      const countEl = document.getElementById('resultsCount');
      const emptyState = document.getElementById('emptyState');
      
      countEl.textContent = `Showing ${papers.length} publication${papers.length !== 1 ? 's' : ''}`;
      
      if (papers.length === 0) {
        container.innerHTML = '';
        emptyState.style.display = 'block';
        return;
      }
      
      emptyState.style.display = 'none';
      
      container.innerHTML = papers.map(paper => `
        <div class="paper-card">
          <div class="paper-header">
            <div>
              <h3 class="paper-title">${paper.title}</h3>
              <div class="paper-id">PMC ID: ${paper.id} ¬∑ ${paper.year} ¬∑ ${paper.citations} citations</div>
            </div>
          </div>
          
          <div class="paper-meta">
            <span class="meta-tag">üî¨ ${paper.organism}</span>
            <span class="meta-tag">üõ∞Ô∏è ${paper.platform}</span>
            <span class="meta-tag">‚è±Ô∏è ${paper.duration}</span>
          </div>
          
          <p class="paper-abstract">${paper.abstract}</p>
          
          <div class="paper-links">
            <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/${paper.id}/" target="_blank" class="link-btn">üìÑ Full Text</a>
            <a href="https://osdr.nasa.gov/bio/repo/search?q=${encodeURIComponent(paper.title)}" target="_blank" class="link-btn">üóÑÔ∏è OSDR Data</a>
            <a href="https://taskbook.nasaprs.com/tbp/index.cfm" target="_blank" class="link-btn">üí∞ Grant Info</a>
            <a href="https://public.ksc.nasa.gov/nslsl/" target="_blank" class="link-btn">üß¨ Sample Library</a>
          </div>
        </div>
      `).join('');
    }

    // Simulate API call (replace with actual API)
    function mockAPISearch(query) {
      // In production: fetch('/api/search?q=' + query)
      return Promise.resolve(samplePapers);
    }
  </script>
</body>
</html>